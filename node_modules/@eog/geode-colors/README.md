# Geode-Colors

A Library for consuming the EOG color wheel in React Apps!

> :rotating_light: This library is in the experimental stage and will go through many iterations as we develop this in conjunction with the design team. Expect frequent breaking changes!

**NPM: [Geode Colors Library](https://git.eogresources.com/eog/Geode-Web/packages/37)**

NPM is weird, I suggest viewing the docs in GitHub:

**[Repo](https://git.eogresources.com/eog/Geode-Web/tree/master/libs/geode-colors/)**

**[How-To-Geode-With-MUI](https://git.eogresources.com/eog/Geode-Web/tree/master/libs/geode-colors/how-to.md)**

To get all the EOG colors from the design team, simply import the package in your MUI theme.tsx

```tsx
import Geode, {
  geodeColors,
  ExtendedTheme,
  p3geodeColors,
  supportsP3,
} from '@eog/geode-colors';
```

> :warning: **See warning about using [p3 colors](#p3-colors)**

To get the most out these colors using Material-UI, we suggest injecting the entirety of the geode color wheel directly ~into~ the MUI theme object that will get returned whenever you call `makeStyles((theme: ExtendedTheme)`:

```tsx
const theme = React.useMemo(
  () =>
    makeBaseTheme({
      palette: currentWidth && prefersDarkMode ? darkPalette : lightPalette,
      geode: geodeColors,
    }),
  [prefersDarkMode, currentWidth],
);

return (
  <ThemeProvider theme={theme}>
    <CssBaseline />
    {children}
  </ThemeProvider>
);
```

Which allows you to piecemeal use the geode color palette anywhere you use MUI styles

```tsx
import { ExtendedTheme } from '@eog/geode-colors';

const useStyles = makeStyles((theme: ExtendedTheme) => ({
  avatar: {
    backgroundColor: theme.geode.blue[20],
    color: theme.geode.blue[50],
  },
}));
```

instead of having to do this on every component:

```tsx
import { geodeColors, ExtendedTheme } from '@eog/geode-colors';

const useStyles = makeStyles((theme: ExtendedTheme) => ({
  avatar: {
    backgroundColor: geodeColors.blue[20],
    color: geodeColors.blue[50],
  },
}));
```

---

## Typography, Shadows, and Overrides

We now also provide customized typography, box-shadow defaults, and custom overrides to the MUI classes that can be passed directly into your MUI themes just like color palettes:

```tsx
import {
  geodeColors,
  darkPalette,
  lightPalette,
  overrides,
  typography,
  shadows,
} from '@eog/';
const theme = React.useMemo(
  () =>
    makeBaseTheme({
      palette: currentWidth && prefersDarkMode ? darkPalette : lightPalette,
      geode: geodeColors,
      overrides,
      typography,
      shadows,
    }),
  [prefersDarkMode, currentWidth],
);
```

---

## P3 Colors

This library exposes two objects: `geode` and `p3geode`. Regular geode contains normal RGB hexcodes, and will work in any browser. `p3geode` provides the same colors, but with CSS values that translates to the P3 color space, which is a much wider gamut of the RGB space. Right now, only Safari and iOS devices utilize this color space. This library exposes a function that can detect if the browser the app is running in can utilize the P3 color space, and returns the appropriate color objects. You can use it like this:

```tsx
import Geode from '@eog/geode-colors'; // or { supportsP3 }

const geodeColors = Geode.supportsP3(); // or supportsP3()
```

Now, geodeColors will either containe the `geodeColors` or `p3geodeColors` object containing the appropriate color values.

> :warning: _NOTE_: For now, the Material UI library does not consistently support this color space, only RGBA. Do not use p3 colors or the `supportsP3` function with MUI, it will break in Webkit browsers. You can use p3 colors outside of the MUI theme, however. It appears that MUI v15+ will begin supporting the p3 color space, and then we can dynamically inject the appropriate colors to get the most vibrant of colors for our apps!

---

## Extending MUI Theme Interface

Geode Colors now provides an ExtendedTheme interface that customizes the default MUI Theme to fit our design system.

```tsx
export interface ExtendedTheme extends Theme {
  layout?: {
    vh: (
      percent: number,
      options?: {
        subtract: number[];
      },
    ) => number;
  };
  geode: GeodeColorWheel;
  palette: GeodePalette;
}
```

Whenever you need to style components, be sure to import this interface to pass into your style functions.

---

## The colors!

Here's what the color palette looks like. The first image is with regular RGB colors. The second is with the p3 colors. It's a subtle difference, but they really are a much richer color than normal RGB. It's so subtle, you may only be able to appreciate the difference if you view the colors side-by-side in different browsers or open these images on a Mac or anything that supports the P3 color space.

![RGB-colors](src/assets/RGB-colors.png)

![P3-colors](src/assets/P3-colors.png)

---

### Geode Palettes

We've now provided some default color palettes using the design teams Geode naming conventions (currently the mobile colors, eventually will have confirmed web colors).

You can now do the following:

```tsx
import {
  geodeColors,
  darkPalette,
  lightPalette,
  typography,
  shadows,
} from '@eog/geode-colors';
```

Now, we can begin to weave in color conventions that the design team uses into our MUI themes. You can have MUI palette objects that look more like this:

```tsx
export interface ExtendedTheme extends Theme {
  layout: {
    vh: (
      percent: number,
      options?: {
        subtract: number[];
      },
    ) => number;
  };
  geode: GeodeColorWheel;
  palette: GeodePalette;
}
```

If your designs deviate from these defaults, then feel free not to import these palettes and manually plug in the geode colors that you need!

Here are the default properties for light and dark geode themes:

```tsx
const chartColors: ChartColorsPalette = {
  ruby: geodeColors.red[50],
  amber: geodeColors.orange[40],
  citrine: geodeColors.yellowOrange[20],
  emerald: geodeColors.green[30],
  amazonite: geodeColors.blueGreen[30],
  apatite: geodeColors.blue[20],
  sapphire: geodeColors.blue[40],
  amethyst: geodeColors.violet[70],
  iolite: geodeColors.violet[90],
  graphite: geodeColors.gray[50],
  obsidian: geodeColors.black[100],
  calcite: 'rgba(250, 250, 250, 1)',
  streams: {
    streamBoe: geodeColors.black[100],
    streamGas: geodeColors.red[40],
    streamNgl: geodeColors.blue[40],
    streamOil: geodeColors.green[30],
    streamWater: geodeColors.blue[20],
  },
};

export const lightPalette: Partial<GeodePalette> = {
  action: {
    activatedOpacity: 0.24,
    active: 'rgba(0, 0, 0, 0.9)',
    disabled: 'rgba(0, 0, 0, 0.26)',
    disabledBackground: 'rgba(0, 0, 0, 0.12)',
    disabledOpacity: 0.38,
    focus: 'rgba(0, 0, 0, 0.12)',
    focusOpacity: 0.12,
    hover: 'rgba(0, 0, 0, 0.04)',
    hoverOpacity: 0.04,
    selected: 'rgba(0, 0, 0, 0.08)',
    selectedOpacity: 0.08,
  },
  background: {
    default: '#F8F9FA',
    paper: geodeColors.white[0],
  },
  borders: {
    divider: '1px solid rgba(19, 23, 28, 0.1)',
    outline: '1px solid rgb(224, 224, 224)',
  },
  chartColors,
  coloredBackgrounds: {
    customUI: 'rgba(170, 184, 194, 0.08)',
    error: geodeColors.red[0],
    info: geodeColors.blueViolet[5],
    primary: 'rgba(88, 198, 242, 0.23)',
    secondary: 'rgba(205, 167, 243, 0.08)',
    success: geodeColors.green[0],
    warning: geodeColors.yellowOrange[0],
  },
  coloredText: {
    error: geodeColors.red[90],
    info: geodeColors.blueViolet[90],
    success: geodeColors.green[70],
    warning: geodeColors.yellowOrange[90],
  },
  primary: {
    main: geodeColors.blue[40],
    dark: geodeColors.blue[70],
    light: geodeColors.blue[5],
    background: geodeColors.blue[0],
    contrastText: geodeColors.white[0],
    get hover() {
      return setOpacity(this.main, 0.1);
    },
    get selected() {
      return setOpacity(this.main, 0.2);
    },
    get focused() {
      return setOpacity(this.main, 0.25);
    },
  },
  customUI: {
    main: geodeColors.coolGray[50],
    dark: geodeColors.coolGray[70],
    light: geodeColors.coolGray[10],
    background: geodeColors.coolGray[0],
    contrastText: geodeColors.white[0],
    addlContrastText: geodeColors.coolGray[10],
    get hover() {
      return setOpacity(this.main, 0.1);
    },
    get selected() {
      return setOpacity(this.main, 0.2);
    },
    get focused() {
      return setOpacity(this.main, 0.25);
    },
  },
  info: {
    main: geodeColors.blueViolet[50],
    dark: geodeColors.blueViolet[70],
    light: geodeColors.blueViolet[5], 
    background: geodeColors.blueViolet[0],
    contrastText: geodeColors.white[0],
    get hover() {
      return setOpacity(this.main, 0.1);
    },
    get selected() {
      return setOpacity(this.main, 0.2);
    },
    get focused() {
      return setOpacity(this.main, 0.25);
    },
  },
  success: {
    main: geodeColors.green[40],
    dark: geodeColors.green[60],
    light: geodeColors.green[5],
    background: geodeColors.green[0],
    contrastText: geodeColors.white[0],
    get hover() {
      return setOpacity(this.main, 0.1);
    },
    get selected() {
      return setOpacity(this.main, 0.2);
    },
    get focused() {
      return setOpacity(this.main, 0.25);
    },
  },
  warning: {
    main: geodeColors.yellowOrange[30],
    dark: geodeColors.yellowOrange[60],
    light: geodeColors.yellowOrange[5],
    background: geodeColors.yellowOrange[0],
    contrastText: geodeColors.black[100],
    get hover() {
      return setOpacity(this.main, 0.1);
    },
    get selected() {
      return setOpacity(this.main, 0.2);
    },
    get focused() {
      return setOpacity(this.main, 0.25);
    },
  },
  error: {
    main: geodeColors.red[50],
    dark: geodeColors.red[70],
    light: geodeColors.red[5],
    background: geodeColors.red[0],
    contrastText: geodeColors.white[0],
    get hover() {
      return setOpacity(this.main, 0.1);
    },
    get selected() {
      return setOpacity(this.main, 0.2);
    },
    get focused() {
      return setOpacity(this.main, 0.25);
    },
  },
  miscellaneous: {
    backdrop: 'rgba(19, 23, 28, 0.5)',
    divider: 'rgba(19, 23, 28, 0.1)',
    filledInput: 'rgba(83, 104, 120, 0.09)',
    ratingFull: geodeColors.yellowOrange[20],
    ratingUnfilled: '#FBBB31',
    snackBar: geodeColors.coolGray[90],
    tooltip: 'rgba(35, 45, 53, 0.9)',
  },
  secondary: {
    contrastText: geodeColors.white[0],
    dark: geodeColors.violet[70],
    light: geodeColors.violet[10],
    main: geodeColors.violet[50],
    get hover() {
      return setOpacity(this.main, 0.1);
    },
    get selected() {
      return setOpacity(this.main, 0.2);
    },
    get focused() {
      return setOpacity(this.main, 0.25);
    },
  },
  text: {
    disabled: 'rgba(19, 23, 28, 0.25)',
    hint: 'rgba(19, 23, 28, 0.35)',
    primary: 'rgba(19, 23, 28, 0.9)',
    secondary: 'rgba(19, 23, 28, 0.54)',
  },
  stroke: {
    divider: 'rgba(19, 23, 28, 0.10)',
    stroke: 'rgba(19, 23, 28, 0.20)',
    hover: 'rgba(19, 23, 28, 0.50)',
    disabled: 'rgba(19, 23, 28, 0.10)',
  },
  type: 'light',
};

export const darkPalette: Partial<GeodePalette> = {
  action: {
    activatedOpacity: 0.24,
    active: 'rgba(255, 255, 255, 0.9)',
    disabled: 'rgba(255, 255, 255, 0.3)',
    disabledBackground: 'rgba(255, 255, 255, 0.12)',
    disabledOpacity: 0.38,
    focus: 'rgba(255, 255, 255, 0.12)',
    focusOpacity: 0.12,
    hover: 'rgba(255, 255, 255, 0.08)',
    hoverOpacity: 0.08,
    selected: 'rgba(255, 255, 255, 0.16)',
    selectedOpacity: 0.16,
  },
  background: {
    default: geodeColors.coolGray[100],
    paper: geodeColors.coolGray[95],
  },
  borders: {
    divider: '1px solid rgba(137, 155, 168, 0.12)',
    outline: '1px solid rgb(224, 224, 224)',
  },
  chartColors,
  coloredBackgrounds: {
    customUI: 'rgba(61, 73, 86, 0.3)',
    error: geodeColors.red[5],
    info: geodeColors.blueViolet[5],
    primary: 'rgba(0, 79, 142, 0.2)',
    secondary: 'rgba(205, 167, 243, 0.2)',
    success: geodeColors.green[5],
    warning: geodeColors.yellowOrange[5],
  },
  coloredText: {
    error: geodeColors.red[90],
    info: geodeColors.blueViolet[90],
    success: geodeColors.green[70],
    warning: geodeColors.yellowOrange[90],
  },
  primary: {
    main: geodeColors.blue[40],
    dark: geodeColors.blue[90],
    light: geodeColors.blue[20],
    background: geodeColors.blue[100],
    contrastText: geodeColors.white[0],
    get hover() {
      return setOpacity(this.main, 0.1);
    },
    get selected() {
      return setOpacity(this.main, 0.2);
    },
    get focused() {
      return setOpacity(this.main, 0.25);
    },
  },
  customUI: {
    main: geodeColors.coolGray[40],
    dark: geodeColors.coolGray[80],
    light: geodeColors.coolGray[20],
    background: geodeColors.coolGray[90],
    contrastText: geodeColors.black[100],
    addlContrastText: geodeColors.coolGray[80],
    get hover() {
      return setOpacity(this.main, 0.1);
    },
    get selected() {
      return setOpacity(this.main, 0.2);
    },
    get focused() {
      return setOpacity(this.main, 0.25);
    },
  },
  info: {
    main: geodeColors.blueViolet[40],
    dark: geodeColors.blueViolet[90],
    light: geodeColors.blueViolet[10],
    background: geodeColors.blueViolet[100],
    contrastText: geodeColors.white[0],
    get hover() {
      return setOpacity(this.main, 0.15);
    },
    get selected() {
      return setOpacity(this.main, 0.2);
    },
    get focused() {
      return setOpacity(this.main, 0.25);
    },
  },
  success: {
    main: geodeColors.green[40],
    dark: geodeColors.green[90],
    light: geodeColors.green[20],
    background: geodeColors.green[100],
    contrastText: geodeColors.black[100],
    get hover() {
      return setOpacity(this.main, 0.1);
    },
    get selected() {
      return setOpacity(this.main, 0.2);
    },
    get focused() {
      return setOpacity(this.main, 0.25);
    },
  },
  warning: {
    main: geodeColors.yellowOrange[30],
    dark: geodeColors.yellow[90],
    light: geodeColors.yellowOrange[10],
    background: geodeColors.yellow[100],
    contrastText: geodeColors.black[100],
    get hover() {
      return setOpacity(this.main, 0.1);
    },
    get selected() {
      return setOpacity(this.main, 0.2);
    },
    get focused() {
      return setOpacity(this.main, 0.25);
    },
  },
  error: {
    main: geodeColors.red[40],
    dark: geodeColors.red[90],
    light: geodeColors.red[10],
    background: geodeColors.red[100],
    contrastText: geodeColors.white[0],
    get hover() {
      return setOpacity(this.main, 0.1);
    },
    get selected() {
      return setOpacity(this.main, 0.2);
    },
    get focused() {
      return setOpacity(this.main, 0.25);
    },
  },
  miscellaneous: {
    backdrop: 'rgba(19, 23, 28, 0.5)',
    divider: 'rgba(137, 155, 168, 0.20)',
    filledInput: 'rgba(61, 73, 86, 0.4)',
    ratingFull: geodeColors.yellowOrange[20],
    ratingUnfilled: geodeColors.coolGray[60],
    snackBar: geodeColors.white[0],
    tooltip: 'rgba(216, 223, 228, 0.9)',
  },
  secondary: {
    contrastText: geodeColors.white[0],
    dark: geodeColors.violet[60],
    light: geodeColors.violet[10],
    main: geodeColors.violet[40],
    get hover() {
      return setOpacity(this.main, 0.1);
    },
    get selected() {
      return setOpacity(this.main, 0.2);
    },
    get focused() {
      return setOpacity(this.main, 0.25);
    },
  },
  text: {
    disabled: 'rgba(255, 255, 255, 0.25)',
    hint: 'rgba(255, 255, 255, 0.35)',
    primary: 'rgba(255, 255, 255, 0.9)',
    secondary: 'rgba(255, 255, 255, 0.6)',
  },
  stroke: {
    divider: 'rgba(255, 255, 255, 0.07)',
    stroke: 'rgba(255, 255, 255, 0.2)',
    hover: 'rgba(255, 255, 255, 0.5)',
    disabled: 'rgba(255, 255, 255, 0.07)',
  },
  type: 'dark',
};
```

> :warning: _NOTE_: `hover` and `selected` color values are calculated by a `setOpacity` function that I've exposed in v1.7.0. **[See below](<#setOpacity()>)**

### Current Exposed Types & Interfaces

#### `GeodeColorObject`

An object of values for a particular color's range.

Ex:

```tsx
const color: GeodeColorObject = {
  '0': '#F4F4F4',
  '05': '#EEEEEE',
  '5': '#EEEEEE',
  '10': '#DEDFDF',
  '20': '#D6D7D8',
  '30': '#B6B8B9',
  '40': '#969A9C',
  '50': '#797D81',
  '60': '#636769',
  '70': '#56585B',
  '80': '#484A4D',
  '85': '#3B3C3D',
  '90': '#2B2C2E',
  '95': '#1E1F20',
  '100': '#161617',
};
```

#### `GeodeColorWheel`

An object of the entire collection of `GeodeColorObject`s that is exposed when imported as `geodeColors` or `p3geodeColors`.

```tsx
type GeodeColorWheel = {
    blue: GeodeColorObject;
    blueGreen: GeodeColorObject;
    blueViolet: GeodeColorObject;
    coolGray: GeodeColorObject;
    ... 9 more ...;
    yellowOrange: GeodeColorObject;
}
```

#### `GeodePalette`

An object defining the semantics and values of the light and dark color palettes the design team has been using for their designs (mostly for mobile right now).

```tsx
export type ChartColorsPalette = {
  ruby: string;
  amber: string;
  citrine: string;
  emerald: string;
  amazonite: string;
  apatite: string;
  sapphire: string;
  amethyst: string;
  iolite: string;
  graphite: string;
  obsidian: string;
  calcite: string;
  streams: {
    streamBoe: string;
    streamGas: string;
    streamNgl: string;
    streamOil: string;
    streamWater: string;
  };
};

export interface ExtendedPalleteColor extends PaletteColor {
  background?: string;
  hover?: string;
  selected?: string;
  focused?: string;
}

export interface GeodePalette extends Palette {
  borders: {
    divider: string;
    outline: string;
  };
  chartColors: ChartColorsPalette;
  coloredBackgrounds: {
    primary: string;
    secondary: string;
    customUI: string;
    info: string;
    success: string;
    warning: string;
    error: string;
  };
  coloredText: {
    info: string;
    success: string;
    warning: string;
    error: string;
  };
  common: {
    black: string;
    white: string;
  };
  miscellaneous: {
    backdrop: string;
    divider: string;
    filledInput: string;
    tooltip: string;
    snackBar: string;
    ratingFull: string;
    ratingUnfilled: string;
  };
  stroke: {
    divider: string;
    stroke: string;
    hover: string;
    disabled: string;
  };
  customUI: ExtendedPalleteColor;
  primary: ExtendedPalleteColor;
  secondary: ExtendedPalleteColor;
  info: ExtendedPalleteColor;
  success: ExtendedPalleteColor;
  warning: ExtendedPalleteColor;
  error: ExtendedPalleteColor;
}
```

**See above for the [current palettes](#geode-palettes)**

### Utility Functions

#### `setOpacity()`

As of **v1.7.0**, you can create hex opacity color values using this function. Simply pass a geode color, theme color, or custom hex color string, along with a number expressed in decimal (.1 = 10%, for example), and you will get an appropriate opaque color in `#rrggbbaa` hex color notation.

```tsx
export const setOpacity = (hex: string | undefined, alpha: number) =>
  !hex
    ? hex
    : `${hex}${Math.floor(alpha * 255)
        .toString(16)
        .padStart(2)}`;
```

#### `geodeDarken(), geodeLighten()`

As of version **1.3.10** of `@eog/geode-colors`, you can change the hue of any geode color by any number of steps within its defined spectrum. For instance, if you wanted to make `blue[50]` two shades darker, you could do `geodeDarken(geodeColors.blue[50], 2)` and get `blue[70]`. The steps parameter can also be negative if you want to go the opposite direction (instead of importing `geodeLighten` like a sane person.

This allows us to keep consistency within the geode color wheel while also being able to programmatically get some gradients/contrast when desired.

Example:

```tsx
import { geodeDarken, geodeColors } from '@eog/geode-colors';

const rowStyles = makeStyles((theme: ExtendedTheme) =>
  createStyles({
    row: (evenRow) => ({
      background: evenRow
        ? theme.palette.geodePalette.backgroundTertiary
        : geodeDarken(theme.palette.background.default, 1),
    }),
  }),
);
```